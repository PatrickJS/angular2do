{"version":3,"sources":["runner_spec.js","@traceur/generated/TemplateParser/9"],"names":[],"mappings":"AAAA;AAAA,KAAO,EAAC,QAAO;AAAG,GAAC;AAAG,IAAE;AAAG,IAAE;AAAG,OAAK;AAAG,WAAS;AAAG,UAAQ,CAAC,KAAO,oBAAkB,CAAC;AACvF,KAAO,EACL,MAAK;AAAG,QAAM;AAAG,kBAAgB;AACjC,UAAQ;AAAG,KAAG;AAAG,SAAO;AAAG,OAAK;AAChC,QAAM;AAAG,iBAAe,CAC1B,KAAO,wBAAsB,CAAC;AAC9B,KAAO,EAAE,OAAM,CAAE,KAAO,2BAAyB,CAAC;AAClD,KAAO,EAAE,OAAM;AAAG,eAAa,CAAE,KAAO,4BAA0B,CAAC;AAEnE,KAAO,SAAS,KAAG,CAAE,AAAD,CAAG;AACrB,SAAO,AAAC,CAAC,QAAO,CAAG,EAAC,AAAD,IAAM;AACvB,AAAI,MAAA,CAAA,QAAO,CAAC;AACZ,AAAI,MAAA,CAAA,MAAK,CAAC;AAEV,WAAS,aAAW,CAAE,eAAc,EAAI,KAAG,CAAG;AAC5C,SAAI,OAAM,AAAC,CAAC,eAAc,CAAC,CAAG;AAC5B,sBAAc,EAAI,GAAC,CAAC;MACtB;AAAA,AACA,WAAK,EAAI,IAAI,OAAK,AAAC,CAAC,CAClB,eAAc,CACd,CAAA,IAAG,AAAC,CAAC,OAAM,CAAC,UAAU,AAAC,CACrB,CAAC,SAAQ,IAAM;AACb,eAAO,EAAI,UAAQ,CAAC;AACpB,aAAO,IAAI,YAAU,AAAC,EAAC,CAAC;MAC1B,CAAG,EAAC,QAAO,CAAC,CACd,CACA,CAAA,IAAG,AAAC,CAAC,MAAK,CAAC,UAAU,AAAC,CAAE,CAAC,AAAD,IAAM,IAAI,WAAS,AAAC,EAAC,CAAG,GAAC,CAAC,CAClD,CAAA,IAAG,AAAC,CAAC,SAAQ,CAAC,UAAU,AAAC,CAAE,CAAC,AAAD,IAAM,IAAI,cAAY,AAAC,EAAC,CAAG,GAAC,CAAC,CACxD,CAAA,IAAG,AAAC,CAAC,gBAAe,CAAC,UAAU,AAAC,CAAE,CAAC,AAAD,IAAM,IAAI,qBAAmB,AAAC,EAAC,CAAG,GAAC,CAAC,CACxE,CAAC,CAAC;AACF,WAAO,OAAK,CAAC;IACf;AAAA,AAEA,KAAC,AAAC,CAAC,iCAAgC,CAAG,EAAC,IAAG,IAAM;AAC9C,iBAAW,AAAC,EAAC,OAAO,AAAC,CAAC,CAAC,EAAC,CAAG,SAAO,CAAC,CAAC,KAC9B,AAAC,CAAE,CAAC,CAAA,IAAM,CAAA,QAAO,SAAS,AAAC,CAAC,iBAAgB,CAAC,CAAE,KAC/C,AAAC,CAAE,CAAC,IAAG,IAAM;AACf,aAAK,AAAC,CAAC,IAAG,GAAG,CAAC,KAAK,AAAC,CAAC,QAAO,CAAC,CAAC;AAC9B,WAAG,AAAC,EAAC,CAAC;MACR,CAAC,CAAC;IACN,CAAC,CAAC;AAEF,KAAC,AAAC,CAAC,4CAA2C,CAAG,EAAC,IAAG,IAAM;AACzD,iBAAW,AAAC,CAAC,CACX,IAAG,AAAC,CAAC,OAAM,oBAAoB,CAAC,QAAQ,AAAC,CAAC,CAAC,GAAE,CAAG,EAAA,CAAC,CAAC,CACpD,CAAC,OAAO,AAAC,CAAC;AAAC,SAAC,CAAG,SAAO;AAAG,eAAO,CAAG,EACjC,IAAG,AAAC,CAAC,OAAM,mBAAmB,CAAC,QAAQ,AAAC,CAAC,CAAC,GAAE,CAAG,EAAA,CAAC,CAAC,CACnD;AAAA,MAAC,CAAC,KAAK,AAAC,CAAE,CAAC,CAAA,IAAM,CAAA,QAAO,SAAS,AAAC,CAAC,iBAAgB,CAAC,CAAE,KAC/C,AAAC,CAAE,CAAC,IAAG,IAAM;AAElB,aAAK,AAAC,CAAC,IAAG,YAAY,CAAC,QAAQ,AAAC,CAAC;AAC/B,kBAAQ,CAAG,MAAI;AACf,oBAAU,CAAG,gBAAc;AAC3B,YAAE,CAAG,EAAA;AACL,YAAE,CAAG,EAAA;AACL,YAAE,CAAG,GAAC;AAAA,QACR,CAAC,CAAC;AACF,WAAG,AAAC,EAAC,CAAC;MACR,CAAC,CAAC;IACJ,CAAC,CAAC;AAEF,KAAC,AAAC,CAAC,uDAAsD,CAAG,EAAC,IAAG,IAAM;AACpE,iBAAW,AAAC,EAAC,OAAO,AAAC,CAAC,CAAC,EAAC,CAAG,SAAO,CAAC,CAAC,KAC9B,AAAC,CAAE,CAAC,CAAA,IAAM,CAAA,QAAO,SAAS,AAAC,CAAC,iBAAgB,CAAC,CAAE,KAC/C,AAAC,CAAE,CAAC,IAAG,IAAM;AAEjB,aAAK,AAAC,CAAC,IAAG,QAAQ,CAAC,QAAQ,AAAC,CAAC,CAAE,IAAG,CAAG,cAAY,CAAE,CAAC,CAAC;AACrD,WAAG,AAAC,EAAC,CAAC;MACR,CAAC,CAAC;IACJ,CAAC,CAAC;AAEF,KAAC,AAAC,CAAC,6BAA4B,CAAG,EAAC,IAAG,IAAM;AAC1C,AAAI,QAAA,CAAA,OAAM,EAAI,EAAC,AAAD,IAAM,GAAC,CAAC;AACtB,iBAAW,AAAC,EAAC,OAAO,AAAC,CAAC;AAAC,SAAC,CAAG,SAAO;AAAG,cAAM,CAAG,QAAM;AAAA,MAAC,CAAC,KAAK,AAAC,CAAE,CAAC,CAAA,IAAM;AACnE,aAAK,AAAC,CAAC,QAAO,IAAI,AAAC,CAAC,OAAM,QAAQ,CAAC,CAAC,QAAQ,AAAC,CAAC,OAAM,CAAC,CAAC;AACtD,WAAG,AAAC,EAAC,CAAC;MACR,CAAC,CAAC;IACJ,CAAC,CAAC;AAEF,KAAC,AAAC,CAAC,6BAA4B,CAAG,EAAC,IAAG,IAAM;AAC1C,AAAI,QAAA,CAAA,OAAM,EAAI,EAAC,AAAD,IAAM,GAAC,CAAC;AACtB,iBAAW,AAAC,EAAC,OAAO,AAAC,CAAC;AAAC,SAAC,CAAG,SAAO;AAAG,cAAM,CAAG,QAAM;AAAA,MAAC,CAAC,KAAK,AAAC,CAAE,CAAC,CAAA,IAAM;AACnE,aAAK,AAAC,CAAC,QAAO,IAAI,AAAC,CAAC,OAAM,QAAQ,CAAC,CAAC,QAAQ,AAAC,CAAC,OAAM,CAAC,CAAC;AACtD,WAAG,AAAC,EAAC,CAAC;MACR,CAAC,CAAC;IACJ,CAAC,CAAC;AAEF,KAAC,AAAC,CAAC,2CAA0C,CAAG,EAAC,IAAG,IAAM;AACxD,iBAAW,AAAC,CAAC,CACX,IAAG,AAAC,CAAC,OAAM,oBAAoB,CAAC,QAAQ,AAAC,CAAC,CAAC,GAAE,CAAG,EAAA,CAAC,CAAC,CACpD,CAAC,OAAO,AAAC,CAAC;AAAC,SAAC,CAAG,SAAO;AAAG,eAAO,CAAG,EACjC,IAAG,AAAC,CAAC,OAAM,oBAAoB,CAAC,QAAQ,AAAC,CAAC,CAAC,GAAE,CAAG,EAAA,CAAC,CAAC,CACpD;AAAA,MAAC,CAAC,KAAK,AAAC,CAAE,CAAC,CAAA,IAAM,CAAA,QAAO,SAAS,AAAC,CAAC,iBAAgB,CAAC,CAAE,KAC/C,AAAC,CAAE,CAAC,IAAG,IAAM;AAElB,aAAK,AAAC,CAAC,QAAO,IAAI,AAAC,CAAC,iBAAgB,CAAC,YAAY,CAAE,GAAE,CAAC,CAAC,KAAK,AAAC,CAAC,CAAA,CAAC,CAAC;AAChE,WAAG,AAAC,EAAC,CAAC;MACR,CAAC,CAAC;IAEJ,CAAC,CAAC;EAEJ,CAAC,CAAC;AACJ;AAAA,AAEA,IAAM,qBAAmB,QAAU,iBAAe;AAChD,cAAY,CAAE,MAAK;ACzGrB,SAAO,CAAA,MAAK,WAAW,AAAC,CAAC,CD0Gd,cAAa,QAAQ,AAAC,CAAC,eAAc,CAAC,CC1GN,CDyGnB,QAAM,CCzGiC,CAAA;ED2G7D;AACF;AAEA,IAAM,cAAY,QAAU,UAAQ;AAClC,YAAU,CAAE,AAAD,CAAG;AACZ,QAAI,AAAC,EAAC,CAAC;EACT;AAAA,AACA,SAAO,CAAE,AAAD,CAAG;AACT,SAAO,EAAE,GAAE,CAAG,GAAC,CAAE,CAAC;EACpB;AAAA,AACF;AAEA,IAAM,WAAS,QAAU,OAAK;AAC5B,YAAU,CAAE,AAAD,CAAG;AACZ,QAAI,AAAC,EAAC,CAAC;EACT;AAAA,AACA,SAAO,CAAE,AAAD,CAAG;AACT,SAAO,EAAE,IAAG,CAAG,cAAY,CAAE,CAAC;EAChC;AAAA,AACF;AAEA,IAAM,YAAU,QAAU,QAAM;AAC9B,YAAU,CAAE,AAAD,CAAG;AACZ,QAAI,AAAC,EAAC,CAAC;EACT;AAAA,AACA,OAAK,CAAE,AAAD;ACpIR,SAAO,CAAA,MAAK,WAAW,AAAC,CAAC,CDqId,cAAa,QAAQ,AAAC,CAAC,EAAC,CAAC,CCrIO,CDoIhC,QAAM,CCpI8C,CAAA;EDsI7D;AACF;AACA","file":"/Users/patrick/Documents/open source/angular/modules/benchpress/test/runner_spec.js","sourceRoot":"/Users/patrick/Documents/open source/angular/modules/benchpress/test/","sourcesContent":["import {describe, it, iit, xit, expect, beforeEach, afterEach} from 'angular2/test_lib';\nimport {\n  Runner, Sampler, SampleDescription,\n  Validator, bind, Injector, Metric,\n  Options, WebDriverAdapter\n} from 'benchpress/benchpress';\nimport { isBlank } from 'angular2/src/facade/lang';\nimport { Promise, PromiseWrapper } from 'angular2/src/facade/async';\n\nexport function main() {\n  describe('runner', () => {\n    var injector;\n    var runner;\n\n    function createRunner(defaultBindings = null) {\n      if (isBlank(defaultBindings)) {\n        defaultBindings = [];\n      }\n      runner = new Runner([\n        defaultBindings,\n        bind(Sampler).toFactory(\n          (_injector) => {\n            injector = _injector;\n            return new MockSampler();\n          }, [Injector]\n        ),\n        bind(Metric).toFactory( () => new MockMetric(), []),\n        bind(Validator).toFactory( () => new MockValidator(), []),\n        bind(WebDriverAdapter).toFactory( () => new MockWebDriverAdapter(), [])\n      ]);\n      return runner;\n    }\n\n    it('should set SampleDescription.id', (done) => {\n      createRunner().sample({id: 'someId'})\n        .then( (_) => injector.asyncGet(SampleDescription) )\n        .then( (desc) => {\n          expect(desc.id).toBe('someId');\n          done();\n        });\n    });\n\n    it('should merge SampleDescription.description', (done) => {\n      createRunner([\n        bind(Options.DEFAULT_DESCRIPTION).toValue({'a': 1})\n      ]).sample({id: 'someId', bindings: [\n        bind(Options.SAMPLE_DESCRIPTION).toValue({'b': 2})\n      ]}).then( (_) => injector.asyncGet(SampleDescription) )\n         .then( (desc) => {\n\n        expect(desc.description).toEqual({\n          'forceGc': false,\n          'userAgent': 'someUserAgent',\n          'a': 1,\n          'b': 2,\n          'v': 11\n        });\n        done();\n      });\n    });\n\n    it('should fill SampleDescription.metrics from the Metric', (done) => {\n      createRunner().sample({id: 'someId'})\n        .then( (_) => injector.asyncGet(SampleDescription) )\n        .then( (desc) => {\n\n        expect(desc.metrics).toEqual({ 'm1': 'some metric' });\n        done();\n      });\n    });\n\n    it('should bind Options.EXECUTE', (done) => {\n      var execute = () => {};\n      createRunner().sample({id: 'someId', execute: execute}).then( (_) => {\n        expect(injector.get(Options.EXECUTE)).toEqual(execute);\n        done();\n      });\n    });\n\n    it('should bind Options.PREPARE', (done) => {\n      var prepare = () => {};\n      createRunner().sample({id: 'someId', prepare: prepare}).then( (_) => {\n        expect(injector.get(Options.PREPARE)).toEqual(prepare);\n        done();\n      });\n    });\n\n    it('should overwrite bindings per sample call', (done) => {\n      createRunner([\n        bind(Options.DEFAULT_DESCRIPTION).toValue({'a': 1}),\n      ]).sample({id: 'someId', bindings: [\n        bind(Options.DEFAULT_DESCRIPTION).toValue({'a': 2}),\n      ]}).then( (_) => injector.asyncGet(SampleDescription) )\n         .then( (desc) => {\n\n        expect(injector.get(SampleDescription).description['a']).toBe(2);\n        done();\n      });\n\n    });\n\n  });\n}\n\nclass MockWebDriverAdapter extends WebDriverAdapter {\n  executeScript(script):Promise {\n    return PromiseWrapper.resolve('someUserAgent');\n  }\n}\n\nclass MockValidator extends Validator {\n  constructor() {\n    super();\n  }\n  describe() {\n    return { 'v': 11 };\n  }\n}\n\nclass MockMetric extends Metric {\n  constructor() {\n    super();\n  }\n  describe() {\n    return { 'm1': 'some metric' };\n  }\n}\n\nclass MockSampler extends Sampler {\n  constructor() {\n    super();\n  }\n  sample():Promise {\n    return PromiseWrapper.resolve(23);\n  }\n}\n","return assert.returnType(($__placeholder__0), $__placeholder__1)"]}