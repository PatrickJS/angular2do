{"version":3,"sources":["template_loader_spec.js"],"names":[],"mappings":"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","file":"/Users/patrick/Documents/open source/angular/modules/angular2/test/core/compiler/template_loader_spec.js","sourceRoot":"/Users/patrick/Documents/open source/angular/modules/angular2/test/core/compiler/","sourcesContent":["import {describe, it, expect, beforeEach, ddescribe, iit, xit, el} from 'angular2/test_lib';\n\nimport {TemplateLoader} from 'angular2/src/core/compiler/template_loader';\n\nimport {Template} from 'angular2/src/core/annotations/template';\n\nimport {PromiseWrapper} from 'angular2/src/facade/async';\n\nimport {XHRMock} from 'angular2/src/mock/xhr_mock';\n\nexport function main() {\n  describe('TemplateLoader', () => {\n    var loader, xhr;\n\n    beforeEach(() => {\n      xhr = new XHRMock()\n      loader = new TemplateLoader(xhr);\n    });\n\n    it('should load inline templates synchronously', () => {\n      var template = new Template({inline: 'inline template'});\n      expect(loader.load(template).content).toHaveText('inline template');\n    });\n\n    it('should load templates through XHR', (done) => {\n      xhr.expect('/foo', 'xhr template');\n      var template = new Template({url: '/foo'});\n      loader.load(template).then((el) => {\n        expect(el.content).toHaveText('xhr template');\n        done();\n      });\n      xhr.flush();\n    });\n\n    it('should cache template loaded through XHR', (done) => {\n      var firstEl;\n      xhr.expect('/foo', 'xhr template');\n      var template = new Template({url: '/foo'});\n      loader.load(template)\n        .then((el) => {\n          firstEl = el;\n          return loader.load(template);\n        })\n        .then((el) =>{\n          expect(el).toBe(firstEl);\n          expect(el.content).toHaveText('xhr template');\n          done();\n        });\n      xhr.flush();\n    });\n\n    it('should throw when no template is defined', () => {\n      var template =  new Template({inline: null, url: null});\n      expect(() => loader.load(template))\n        .toThrowError('Templates should have either their url or inline property set');\n    });\n\n    it('should return a rejected Promise when xhr loading fails', (done) => {\n      xhr.expect('/foo', null);\n      var template = new Template({url: '/foo'});\n      PromiseWrapper.then(loader.load(template),\n        function(_) { throw 'Unexpected response'; },\n        function(error) {\n          expect(error).toEqual('Failed to load /foo');\n          done();\n        }\n      )\n      xhr.flush();\n    });\n\n  });\n}\n\nclass SomeComponent {\n}\n"]}